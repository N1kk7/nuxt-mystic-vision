

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("SUPABASE_URL")
}


model Callback {
  id            String   @id @default(uuid())
  name          String
  email         String   @unique
  phone         String
  dateCallback  DateTime 
  timeSlot      String
  contactMethod ContactMethod @default(GOOGLE_MEET)
  comment       String?   
  status        Status     @default(WAITING_CALL)
  discountEndAt DateTime? 
  createdAt     DateTime   @default(now())
  reservations  CallbackReservation[]
}

model CallbackReservation {
  id        String   @id @default(uuid())
  date      DateTime
  time      String
  expiresAt DateTime
  createdAt DateTime @default(now())
  callback  Callback? @relation(fields: [callbackId], references: [id])
  callbackId String?
}

enum Status {
  WAITING_CALL
  PURCHASED
}

enum ContactMethod {
  PHONE_CALL
  GOOGLE_MEET
  SOMEWHERE_ELSE
}
